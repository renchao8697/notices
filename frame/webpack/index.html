<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.49">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <link rel="icon" type="image/png" sizes="16x16" href="/note/images/icons/favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="/note/images/icons/favicon-32x32.png"><link rel="manifest" href="/note/manifest.webmanifest"><meta name="application-name" content="Note"><meta name="apple-mobile-web-app-title" content="Note"><meta name="apple-mobile-web-app-status-bar-style" content="black"><link rel="apple-touch-icon" href="/note/images/icons/apple-touch-icon.png"><link rel="mask-icon" href="/note/images/icons/safari-pinned-tab.svg" color="#3eaf7c"><meta name="msapplication-TileColor" content="#3eaf7c"><meta name="theme-color" content="#3eaf7c"><title>Webpack | Note</title><meta name="description" content="学习笔记">
    <link rel="modulepreload" href="/note/assets/app.30d0ff3e.js"><link rel="modulepreload" href="/note/assets/index.html.d07ac037.js"><link rel="modulepreload" href="/note/assets/index.html.af7902b1.js"><link rel="prefetch" href="/note/assets/index.html.e253c5aa.js"><link rel="prefetch" href="/note/assets/css.html.fe22007f.js"><link rel="prefetch" href="/note/assets/html.html.39700674.js"><link rel="prefetch" href="/note/assets/cache.html.93e6545a.js"><link rel="prefetch" href="/note/assets/headers.html.cd137cbb.js"><link rel="prefetch" href="/note/assets/index.html.f190abf1.js"><link rel="prefetch" href="/note/assets/index.html.c187833c.js"><link rel="prefetch" href="/note/assets/index.html.8064ac16.js"><link rel="prefetch" href="/note/assets/index.html.388694ed.js"><link rel="prefetch" href="/note/assets/proxy.html.8b788626.js"><link rel="prefetch" href="/note/assets/404.html.265028f6.js"><link rel="prefetch" href="/note/assets/index.html.4143b769.js"><link rel="prefetch" href="/note/assets/css.html.9554f7b9.js"><link rel="prefetch" href="/note/assets/html.html.6400ec5c.js"><link rel="prefetch" href="/note/assets/cache.html.ff180509.js"><link rel="prefetch" href="/note/assets/headers.html.d0af0e96.js"><link rel="prefetch" href="/note/assets/index.html.5ff4f5a9.js"><link rel="prefetch" href="/note/assets/index.html.e16bc965.js"><link rel="prefetch" href="/note/assets/index.html.1f278902.js"><link rel="prefetch" href="/note/assets/index.html.606d0ec9.js"><link rel="prefetch" href="/note/assets/proxy.html.dac803a0.js"><link rel="prefetch" href="/note/assets/404.html.5ebe4ee8.js"><link rel="prefetch" href="/note/assets/404.3afd3e42.js"><link rel="prefetch" href="/note/assets/Layout.374ff3c6.js">
    <link rel="stylesheet" href="/note/assets/style.27fb095d.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/note/" class=""><img class="logo" src="/note/images/logo.png" alt="Note"><span class="site-name can-hide">Note</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="前端基础"><span class="title">前端基础</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="前端基础"><span class="title">前端基础</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/note/frontend-base/html.html" class="" aria-label="HTML"><!--[--><!--]--> HTML <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/note/frontend-base/css.html" class="" aria-label="CSS"><!--[--><!--]--> CSS <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/note/frontend-base/javascript/" class="" aria-label="JS实现常见的数据结构"><!--[--><!--]--> JS实现常见的数据结构 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="框架"><span class="title">框架</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="框架"><span class="title">框架</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>Vue</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/note/frame/vue2/" class="" aria-label="Vue2"><!--[--><!--]--> Vue2 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/note/frame/vue3/" class="" aria-label="Vue3"><!--[--><!--]--> Vue3 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>React</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/note/frame/react/" class="" aria-label="React"><!--[--><!--]--> React <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>Webpack</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a aria-current="page" href="/note/frame/webpack/" class="router-link-active router-link-exact-active router-link-active" aria-label="Webpack"><!--[--><!--]--> Webpack <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="HTTP"><span class="title">HTTP</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="HTTP"><span class="title">HTTP</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/note/http/headers.html" class="" aria-label="HTTP Headers"><!--[--><!--]--> HTTP Headers <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/note/http/cache.html" class="" aria-label="HTTP 缓存"><!--[--><!--]--> HTTP 缓存 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a class="external-link" href="https://github.com/renchao8697/note" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-color-mode-button" title="toggle color mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><div id="docsearch-container"></div></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="前端基础"><span class="title">前端基础</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="前端基础"><span class="title">前端基础</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/note/frontend-base/html.html" class="" aria-label="HTML"><!--[--><!--]--> HTML <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/note/frontend-base/css.html" class="" aria-label="CSS"><!--[--><!--]--> CSS <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/note/frontend-base/javascript/" class="" aria-label="JS实现常见的数据结构"><!--[--><!--]--> JS实现常见的数据结构 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="框架"><span class="title">框架</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="框架"><span class="title">框架</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>Vue</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/note/frame/vue2/" class="" aria-label="Vue2"><!--[--><!--]--> Vue2 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/note/frame/vue3/" class="" aria-label="Vue3"><!--[--><!--]--> Vue3 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>React</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/note/frame/react/" class="" aria-label="React"><!--[--><!--]--> React <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>Webpack</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a aria-current="page" href="/note/frame/webpack/" class="router-link-active router-link-exact-active router-link-active" aria-label="Webpack"><!--[--><!--]--> Webpack <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="HTTP"><span class="title">HTTP</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="HTTP"><span class="title">HTTP</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/note/http/headers.html" class="" aria-label="HTTP Headers"><!--[--><!--]--> HTTP Headers <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/note/http/cache.html" class="" aria-label="HTTP 缓存"><!--[--><!--]--> HTTP 缓存 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a class="external-link" href="https://github.com/renchao8697/note" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading">Vue <!----></p><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/note/frame/vue2/" class="sidebar-item" aria-label="Vue2"><!--[--><!--]--> Vue2 <!--[--><!--]--></a><!----></li><li><a href="/note/frame/vue3/" class="sidebar-item" aria-label="Vue3"><!--[--><!--]--> Vue3 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a href="/note/frame/react/" class="sidebar-item sidebar-heading" aria-label="React"><!--[--><!--]--> React <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/note/frame/webpack/" class="router-link-active router-link-exact-active router-link-active sidebar-item sidebar-heading active" aria-label="Webpack"><!--[--><!--]--> Webpack <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/note/frame/webpack/#webpack与gulp的区别" class="router-link-active router-link-exact-active sidebar-item" aria-label="webpack与gulp的区别"><!--[--><!--]--> webpack与gulp的区别 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/note/frame/webpack/#webpack相关概念" class="router-link-active router-link-exact-active sidebar-item" aria-label="webpack相关概念"><!--[--><!--]--> webpack相关概念 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/note/frame/webpack/#loader和plugin的区别" class="router-link-active router-link-exact-active sidebar-item" aria-label="loader和plugin的区别？"><!--[--><!--]--> loader和plugin的区别？ <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/note/frame/webpack/#自定义loader" class="router-link-active router-link-exact-active sidebar-item" aria-label="自定义loader"><!--[--><!--]--> 自定义loader <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/note/frame/webpack/#编写loader应遵循的准则" class="router-link-active router-link-exact-active sidebar-item" aria-label="编写loader应遵循的准则"><!--[--><!--]--> 编写loader应遵循的准则 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/note/frame/webpack/#webpack的构建流程" class="router-link-active router-link-exact-active sidebar-item" aria-label="webpack的构建流程"><!--[--><!--]--> webpack的构建流程 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/note/frame/webpack/#webpack4与5的区别" class="router-link-active router-link-exact-active sidebar-item" aria-label="webpack4与5的区别"><!--[--><!--]--> webpack4与5的区别 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/note/frame/webpack/#预获取-prefetch-、预加载-preload" class="router-link-active router-link-exact-active sidebar-item" aria-label="预获取（prefetch）、预加载（preload）"><!--[--><!--]--> 预获取（prefetch）、预加载（preload） <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/note/frame/webpack/#常见的loader" class="router-link-active router-link-exact-active sidebar-item" aria-label="常见的loader"><!--[--><!--]--> 常见的loader <!--[--><!--]--></a><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/note/frame/webpack/#file-loader" class="router-link-active router-link-exact-active sidebar-item" aria-label="file-loader"><!--[--><!--]--> file-loader <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/note/frame/webpack/#url-loader" class="router-link-active router-link-exact-active sidebar-item" aria-label="url-loader"><!--[--><!--]--> url-loader <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/note/frame/webpack/#vue-loader、vue-template-compiler" class="router-link-active router-link-exact-active sidebar-item" aria-label="vue-loader、vue-template-compiler"><!--[--><!--]--> vue-loader、vue-template-compiler <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/note/frame/webpack/#常见的plugin" class="router-link-active router-link-exact-active sidebar-item" aria-label="常见的plugin"><!--[--><!--]--> 常见的plugin <!--[--><!--]--></a><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/note/frame/webpack/#html-webpack-plugin" class="router-link-active router-link-exact-active sidebar-item" aria-label="html-webpack-plugin"><!--[--><!--]--> html-webpack-plugin <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/note/frame/webpack/#devserver" class="router-link-active router-link-exact-active sidebar-item" aria-label="DevServer"><!--[--><!--]--> DevServer <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/note/frame/webpack/#asset-module资源模块" class="router-link-active router-link-exact-active sidebar-item" aria-label="asset module资源模块"><!--[--><!--]--> asset module资源模块 <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h1 id="webpack" tabindex="-1"><a class="header-anchor" href="#webpack" aria-hidden="true">#</a> Webpack</h1><h2 id="webpack与gulp的区别" tabindex="-1"><a class="header-anchor" href="#webpack与gulp的区别" aria-hidden="true">#</a> webpack与gulp的区别</h2><ul><li><p>gulp是一个基于流（stream）自动化构建工具，可以配合各种插件对js、css、img的压缩合并，做到减少文件体积，加快请求速度和请求次数。它会自动执行指定的任务，就像 <em>流水线</em> ，通过不同的插件对资源进行加工。</p></li><li><p>webpack是一个用于现代JavaScript应用程序的 <em>静态模块打包工具</em> 。当webpack处理应用程序时，它会在内部从一个或多个入口递归的构建一个 <strong>依赖图</strong> ，然后将你项目中所需的每一个模块组合成一个或多个bundles，他们均为静态资源，用于展示你的内容。如果说gulp是一个 <em>流水线</em> 的话，webpack就像一个 <em>工厂</em> ，它们的侧重点不一样，工厂里自然会包含 <em>流水线</em> ，gulp只是webpack功能的一部分。</p><ul><li>静态模块：静态模块指的是开发阶段，可以被webpack直接引用的资源（可以直接被获取打包进bundle.js的资源）</li><li>依赖图：当webpack处理应用程序时，它会在内部构件一个依赖图，此依赖图对应映射到项目所需的每个模块（不局限js文件），并生成一个或多个bundle</li></ul></li><li><p>gulp实例</p></li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> gulp <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;gulp&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 获取插件</span>
<span class="token keyword">const</span> babel <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;gulp-babel&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 定义任务</span>
gulp<span class="token punctuation">.</span><span class="token function">task</span><span class="token punctuation">(</span><span class="token string">&#39;babel&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> gulp<span class="token punctuation">.</span><span class="token function">src</span><span class="token punctuation">(</span><span class="token string">&#39;./src/js&#39;</span><span class="token punctuation">)</span> <span class="token comment">// 创建一个流</span>
    <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span><span class="token function">babel</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">presets</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;@babel/env&#39;</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span> 
    <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>gulp<span class="token punctuation">.</span><span class="token function">dest</span><span class="token punctuation">(</span><span class="token string">&#39;./dist/js&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment">// dest写入</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 定义任务列表</span>
<span class="token keyword">const</span> tasks <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&#39;babel&#39;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">// 使用series按顺序执行任务</span>
gulp<span class="token punctuation">.</span><span class="token function">task</span><span class="token punctuation">(</span><span class="token string">&#39;default&#39;</span><span class="token punctuation">,</span> gulp<span class="token punctuation">.</span><span class="token function">series</span><span class="token punctuation">(</span><span class="token operator">...</span>tasks<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">done</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">done</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="webpack相关概念" tabindex="-1"><a class="header-anchor" href="#webpack相关概念" aria-hidden="true">#</a> webpack相关概念</h2><ul><li>entry：入口起点，用来告诉webpack用哪个文件作为构建依赖图的起点。webpack会根据entry递归的去寻找依赖，每个依赖都将被它处理，最后输出到打包成果中。</li><li>output：output属性告诉webpack在哪里输出它所创建的bundle，以及如何命名这些文件。</li><li>mode：4.0开始，webpack支持零配置，旨在为开发人员减少上手难度，同时加入了mode的概念，用于指定打包的目标环境，以便在打包的过程中启用webpack针对不同的环境下内置的优化。</li><li>loader：默认情况下webpack只能处理JavaScript和JSON文件。loader让webpack能够去处理其他类型的文件，并将它们转换为有效模块，以供应用程序使用。</li><li>plugin：loader用于转换某些类型的模块，而插件则可以用于执行范围更广的任务。包括：打包优化，资源管理，注入环境变量。</li><li>chunk：指代码块，一个chunk可能由多个模块组合而成，也用于代码合并与分割。</li><li>bundle：资源经过webpack流程解析编译后最终输出的成果文件。</li><li>module：是开发中的单个模块，在webpack的世界里，一切皆模块，一个模块对应一个文件，webpack会从配置的entry中递归开始找出所有依赖的模块，生成依赖图。</li></ul><h2 id="loader和plugin的区别" tabindex="-1"><a class="header-anchor" href="#loader和plugin的区别" aria-hidden="true">#</a> loader和plugin的区别？</h2><ul><li>作用： <ul><li><code>loader</code>直译为“加载器”。webpack将一切文件视为模块，但是webpack原生值能解析js和json文件，如果想将其他文件也打包的话，就会用到<code>loader</code>。所以<code>loader</code>的作用是让webpack拥有了加载和解析其他文件的能力。</li><li><code>plugin</code>直译为“插件”。<code>plugin</code>可以扩展webpack的功能，让webpack具有更多的灵活性。在webpack运行的生命周期中会广播出许多事件，<code>plugin</code>可以监听这些事件，在合适的时机通过webpack提供的API改变输出结果。</li></ul></li><li>用法： <ul><li>loader在<code>module.rules</code>中配置，也就是说他作为模块的解析规则而存在。类型为数组，每一项都是一个<code>Object</code>，里面描述了队医什么类型的文件（<code>test</code>），使用什么加载（<code>loader</code>）和使用的参数（<code>options</code>）</li><li>plugin在<code>plugins</code>中单独配置。类型为数组，每一项是一个<code>plugin</code>的实例，参数都通过构造函数传入。</li></ul></li></ul><h2 id="自定义loader" tabindex="-1"><a class="header-anchor" href="#自定义loader" aria-hidden="true">#</a> 自定义loader</h2><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">source</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 获取配置文件传递的参数</span>
  <span class="token comment">// this.getOptions是5.x的方法</span>
  <span class="token comment">// 4.x使用this.query或通过loader-utils提供方法获取</span>
  <span class="token keyword">const</span> options <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getOptions</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> source<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>loader就是一个函数，声明式函数，不能用箭头函数（因为函数中的<code>this</code>作为上下文会被webpack填充，并且<code>loader runner</code>中包含一些使用的方法）</li><li><code>this.callback</code>，可使用<code>this.callback</code>方法来返回多个信息</li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">source</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">callback</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> source<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// this.callback函数参数</span>
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">callback</span><span class="token punctuation">(</span>
  <span class="token literal-property property">err</span><span class="token operator">:</span> Error <span class="token operator">|</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
  <span class="token literal-property property">content</span><span class="token operator">:</span> string <span class="token operator">|</span> Buffer<span class="token punctuation">,</span>
  sourceMap<span class="token operator">?</span><span class="token operator">:</span> SourceMap<span class="token punctuation">,</span>
  mata<span class="token operator">?</span><span class="token operator">:</span> any
<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><code>this.async</code>，如果loader中有异步操作，可使用<code>this.async</code></li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">source</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> callback <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">async</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// 参数与this.callback相同</span>
    <span class="token function">callback</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> source<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>多个loader会按数组自后向前执行</li><li>loader路径，自定义loader可以通过两种方式添加至rules <ul><li>使用path获取绝对路径添加<code>use: [path.resolve(__dirname, &quot;./loaders/loader1.js&quot;)]</code></li><li>使用resolveLoader添加<code>resolveLoader: {modules: [&quot;node_modules&quot;, &quot;./loader&quot;]}</code></li></ul></li></ul><h2 id="编写loader应遵循的准则" tabindex="-1"><a class="header-anchor" href="#编写loader应遵循的准则" aria-hidden="true">#</a> 编写loader应遵循的准则</h2><ul><li>保持 <strong>简单</strong></li><li>使用 <strong>链式</strong>传递</li><li><strong>模块化</strong> 的输出</li><li>确保 <strong>无状态</strong></li><li>使用 <strong>loader utilities</strong></li><li>记录 <strong>loader的依赖</strong></li><li>解析 <strong>模块依赖关系</strong></li><li>提取 <strong>通用代码</strong></li><li>避免 <strong>绝对路径</strong></li><li>使用 <strong>peer dependencies</strong></li></ul><h4 id="简单-simple" tabindex="-1"><a class="header-anchor" href="#简单-simple" aria-hidden="true">#</a> 简单（simple）</h4><p>loaders应该只做单一任务。这不仅使每个loader易维护，也可以在更多场景链式调用</p><h4 id="链式-chaining" tabindex="-1"><a class="header-anchor" href="#链式-chaining" aria-hidden="true">#</a> 链式（chaining）</h4><p>利用loader可以链式调用的优势。写五个简单的loader实现五项任务，而不是一个loader实现五项任务。功能隔离不仅使用loader更简单，可能还可以将它们用于你原先没有想到的功能。</p><h4 id="模块化-modular" tabindex="-1"><a class="header-anchor" href="#模块化-modular" aria-hidden="true">#</a> 模块化（modular）</h4><p>保证输出模块化。loader生成的模块与普通模块遵循相同的设计原则。</p><h4 id="无状态-stateless" tabindex="-1"><a class="header-anchor" href="#无状态-stateless" aria-hidden="true">#</a> 无状态（stateless）</h4><p>确保loader在不同模块之间转化不保存状态。每次运行都应独立与其他编译模块以及相同模块之前的编译结果。</p><h4 id="loader工具库-loader-utilities" tabindex="-1"><a class="header-anchor" href="#loader工具库-loader-utilities" aria-hidden="true">#</a> loader工具库（Loader Utilities）</h4><p>冲分利用<code>loader-utils</code>包。它提供了许多有用的工具，最常用的一种工具是获取传递给loader的选项。</p><h4 id="loader依赖-loader-dependencies" tabindex="-1"><a class="header-anchor" href="#loader依赖-loader-dependencies" aria-hidden="true">#</a> loader依赖（loader dependencies）</h4><p>如果以loader使用外部资源，<strong>必须声明它</strong>。这些信息用于使缓存loaders无效，以及在观察模式（watch mode）下重编译。下面是一个简单示例，说明如何使用<code>addDependency</code>方法实现上述声明：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> path <span class="token keyword">from</span> <span class="token string">&#39;path&#39;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">source</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> callback <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">async</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> headerPath <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&#39;header.js&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">addDependency</span><span class="token punctuation">(</span>headerPath<span class="token punctuation">)</span><span class="token punctuation">;</span>

  fs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span>headerPath<span class="token punctuation">,</span> <span class="token string">&#39;utf-8&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> header</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token function">callback</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">callback</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> header <span class="token operator">+</span> <span class="token string">&#39;\n&#39;</span> <span class="token operator">+</span> source<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="模块依赖-module-dependencies" tabindex="-1"><a class="header-anchor" href="#模块依赖-module-dependencies" aria-hidden="true">#</a> 模块依赖（module dependencies）</h4><p>根绝模块类型，可能会有不同的模式指定依赖关系。例如在CSS中，使用<code>@import</code>和<code>url(...)</code>语句来声明依赖。这些依赖应该由模块系统解析。 可以通过以下两种方式中的一种来实现： * 通过把它们转换成<code>require</code>语句 * 使用<code>this.resolve</code>函数解析路径</p><h4 id="通用代码-common-code" tabindex="-1"><a class="header-anchor" href="#通用代码-common-code" aria-hidden="true">#</a> 通用代码（common code）</h4><p>避免在loader处理的每个模块中生成通用代码。相反，应该在loader中创建一个运行时文件，并生成<code>require</code>语句以引用该共享模块： src/loader-runtime.js</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> someOtherModule <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;./some-other-module&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token function">runtime</span><span class="token punctuation">(</span><span class="token parameter">params</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> x <span class="token operator">=</span> params<span class="token punctuation">.</span>y <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token function">someOtherModule</span><span class="token punctuation">(</span>params<span class="token punctuation">,</span> x<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>src/loader.js</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> runtime <span class="token keyword">from</span> <span class="token string">&#39;./loader-runtime.js&#39;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">loader</span><span class="token punctuation">(</span><span class="token parameter">source</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 自定义的 loader 逻辑</span>

  <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token function">runtime</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    source<span class="token punctuation">,</span>
    <span class="token literal-property property">y</span><span class="token operator">:</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="绝对路径-absolute-paths" tabindex="-1"><a class="header-anchor" href="#绝对路径-absolute-paths" aria-hidden="true">#</a> 绝对路径（absolute paths）</h4><p>不要在模块代码中插入绝对路径，因为当项目根路径变化时，文件绝对路径也会变化<code>loader-utils</code>中的<code>stringifyRequest</code>方法，可以将绝对路径转化为相对路径。</p><h4 id="同等依赖-peer-dependencies" tabindex="-1"><a class="header-anchor" href="#同等依赖-peer-dependencies" aria-hidden="true">#</a> 同等依赖（peer dependencies）</h4><p>如果你的loader简单包裹另外一个包，你应该把这个包作为一个<code>peerDependency</code>引入。这种方式允许应用程序开发者在必要情况下，在<code>package.json</code>中指定所需的确定版本。 例如，sass-loader指定node-sass作为同等依赖，引用如下：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token punctuation">{</span>
  <span class="token string-property property">&quot;peerDependencies&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string-property property">&quot;node-sass&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^4.0.0&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="webpack的构建流程" tabindex="-1"><a class="header-anchor" href="#webpack的构建流程" aria-hidden="true">#</a> webpack的构建流程</h2><p>webpack的运行流程是一个串行的过程，从启动到结束会依次执行以下流程：</p><ol><li>初始化参数：从配置文件和Shell语句中读取与合并参数，得出最终参数；</li><li>开始编译：用上一步得到的参数初始化<code>Compiler</code>对象，加载所有配置的插件，执行对象的<code>run</code>方法开始执行编译；</li><li>确定入口：根据配置中的entry找出所有的入口文件；</li><li>编译模块：从入口文件出发，低啊用所有配置的loader对模块进行翻译，再找出该模块依赖的模块，再递归本步骤直到所有入库依赖的文件都经过了本步骤；</li><li>完成模块编译：在经过第4步使用loader翻译完所有模块后，得到了每个模块被翻译后的最终内容以及它们之间的依赖关系；</li><li>输出资源：根据入口和模块之间的依赖关系，组装成一个个包含多个模块的Chunk转换成一个单独的文件加入到输出列表，这步是可以修改输出内容的最后机会；</li><li>输出完成：在确定好输出内容后，根据配置确定输出的路径和文件名，把文件内容写入到文件系统。 在以上过程中，webpack会在特定的时间点广播特定的事件，插件在监听到感兴趣的事件后会执行特定的逻辑，并且插件可以调用webpack提供的API改变webpack的运行结果。</li></ol><h2 id="webpack4与5的区别" tabindex="-1"><a class="header-anchor" href="#webpack4与5的区别" aria-hidden="true">#</a> webpack4与5的区别</h2><ul><li>引入图片、字体图标、音视频 <ul><li>4.x需要<code>url-loader</code>和<code>file-loader</code></li><li>5.x可以使用内置的<code>Asset Modules</code></li></ul></li><li>清理<code>/dist</code>文件夹 <ul><li>4.x使用<code>clean-webpack-plugin</code>插件</li><li>5.x可在<code>output</code>中添加<code>clean: true</code>属性</li></ul></li></ul><h2 id="预获取-prefetch-、预加载-preload" tabindex="-1"><a class="header-anchor" href="#预获取-prefetch-、预加载-preload" aria-hidden="true">#</a> 预获取（prefetch）、预加载（preload）</h2><ul><li>prefetch（预获取）：将来某些导航下可能需要的资源 <ul><li><code>import(/* webpackPrefetch: true */ &#39;./xxx/xxx.js&#39;)</code></li><li>上面代码会生成<code>&lt;link rel=&quot;prefetch&quot; href=&quot;xxx.js&quot;&gt;</code>并追加到页面头部</li><li>prefetch chunk会在父chunk加载结束后开始加载</li><li>prefetch chunk在浏览器闲置时下载</li><li>prefetch chunk会用于未来的某个时刻</li></ul></li><li>preload（预加载）：当前导航下可能需要资源 <ul><li><code>import(/* webpackPreload: true */ &#39;Libary&#39;)</code></li><li><code>&lt;link rel=&quot;preload&quot;&gt;</code></li><li>preload chunk会在父chunk加载时，以并行方式开始加载</li><li>preload chunk具有中等优先级，并立即下载</li><li>preload chunk会在父chunk中立即请求，用于当下时刻</li></ul></li></ul><h2 id="常见的loader" tabindex="-1"><a class="header-anchor" href="#常见的loader" aria-hidden="true">#</a> 常见的loader</h2><h3 id="file-loader" tabindex="-1"><a class="header-anchor" href="#file-loader" aria-hidden="true">#</a> file-loader</h3><p>file-loader：把文件输出到一个文件夹中，在代码中通过相对URL去引用输出的文件</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>  <span class="token punctuation">{</span>
    <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(png|jpg|gif)$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
    <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">&#39;file-loader&#39;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">outputPath</span><span class="token operator">:</span> <span class="token string">&#39;font&#39;</span><span class="token punctuation">,</span> <span class="token comment">// 文件输出路径，默认，undefined</span>
          <span class="token literal-property property">publicPath</span><span class="token operator">:</span> <span class="token string">&#39;font&#39;</span><span class="token punctuation">,</span> <span class="token comment">// 文件引用路径，默认，__webpack_public_path__</span>
          <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;[name].[ext]&#39;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="url-loader" tabindex="-1"><a class="header-anchor" href="#url-loader" aria-hidden="true">#</a> url-loader</h3><p>url-loader：和file-loader类似，但是能在文件很小的情况下以base64的方式吧文件内容注入到代码中</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>  <span class="token punctuation">{</span>
    <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(png|jpg|gif)$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
    <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">&#39;url-loader&#39;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">fallback</span><span class="token operator">:</span> <span class="token string">&#39;file-loader&#39;</span><span class="token punctuation">,</span> <span class="token comment">// 超过限制大小使用的loader，默认，file-loader</span>
          <span class="token literal-property property">fallback</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">&#39;file-loader&#39;</span><span class="token punctuation">,</span>
            <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{</span>
              <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;img/[name].[hash:8].[ext]&#39;</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token literal-property property">limit</span><span class="token operator">:</span> <span class="token number">8192</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="vue-loader、vue-template-compiler" tabindex="-1"><a class="header-anchor" href="#vue-loader、vue-template-compiler" aria-hidden="true">#</a> vue-loader、vue-template-compiler</h3><ul><li>使用vue-loader除了使用loader之外，还要引入<code>VueLoaderPlugin</code>插件，它的作用是将你定义过的其它规则复制并应用到<code>.vue</code>文件里相应语言的部分。</li><li>当vue-loader编译组件中的template时，如遇到url，它会将该url转换为webpack模块请求，如：</li></ul><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>../image.png<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>将会编译为：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&#39;img&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">attrs</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">src</span><span class="token operator">:</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;../image.png&#39;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>转换规则： <ol><li>如遇绝对路径，原样保留</li><li>如<code>.</code>开头，按本地文件目录解析</li><li>如<code>～</code>开头，将会被看作模块依赖（可引用node依赖中的资源）</li><li>如<code>@</code>开头，也会被看作模块依赖，如使用<code>vue-cli</code>，默认配置了<code>alias</code>，可直接指向<code>/src</code></li></ol></li><li>sass-loader可以使用additionalData选项，可在所有被处理的文件中共享变量，而不需要显式的导入</li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token punctuation">{</span>
  <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">&#39;sass-loader&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">additionalData</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">$color: red;</span><span class="token template-punctuation string">`</span></span>
    <span class="token literal-property property">additionalData</span><span class="token operator">:</span> <span class="token string">&#39;@import \&#39;@/scss/variables.scss\&#39;;\n@import \&#39;~vuetify/src/styles/styles.sass\&#39;;&#39;</span>
    <span class="token literal-property property">sassOptions</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token comment">// sass-loader默认不处理.sass的缩进语法，需要添加indentedSyntax选项</span>
      <span class="token literal-property property">indentedSyntax</span><span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> VueLoaderPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;vue-loader/lib/plugin&#39;</span><span class="token punctuation">)</span>
module<span class="token punctuation">.</span>export <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">&#39;development&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token operator">/</span><span class="token punctuation">.</span><span class="token operator">/</span>vue$<span class="token operator">/</span><span class="token punctuation">,</span>
        <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">&#39;vue-loader&#39;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.js$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">&#39;babel-loader&#39;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token operator">/</span><span class="token punctuation">.</span><span class="token operator">/</span>css$<span class="token operator">/</span><span class="token punctuation">,</span>
        <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;vue-style-loader&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;css-loader&#39;</span><span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">VueLoaderPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="常见的plugin" tabindex="-1"><a class="header-anchor" href="#常见的plugin" aria-hidden="true">#</a> 常见的plugin</h2><h3 id="html-webpack-plugin" tabindex="-1"><a class="header-anchor" href="#html-webpack-plugin" aria-hidden="true">#</a> html-webpack-plugin</h3><p>HtmlWebpackPlugin简化HTML文件的创建，以便为你的webpack包提供服务。</p><table><thead><tr><th style="text-align:center;">Name</th><th style="text-align:center;">Type</th><th style="text-align:center;">Default</th><th style="text-align:left;">Description</th></tr></thead><tbody><tr><td style="text-align:center;"><code>title</code></td><td style="text-align:center;"><code>{String}</code></td><td style="text-align:center;"><code>Webpack App</code></td><td style="text-align:left;">生成<code>HTML</code>的<code>title</code></td></tr><tr><td style="text-align:center;"><code>filename</code></td><td style="text-align:center;">`{String</td><td style="text-align:center;">Function}`</td><td style="text-align:left;">&#39;index.html&#39;</td></tr><tr><td style="text-align:center;"><code>tempalte</code></td><td style="text-align:center;"><code>{String}</code></td><td style="text-align:center;"></td><td style="text-align:left;">模板，默认将使用<code>src/index.ejs</code></td></tr><tr><td style="text-align:center;"><code>tempalteContent</code></td><td style="text-align:center;">`{String</td><td style="text-align:center;">Function</td><td style="text-align:left;">false}`</td></tr><tr><td style="text-align:center;"><code>tempalteParameters</code></td><td style="text-align:center;">`{Boolean</td><td style="text-align:center;">Object</td><td style="text-align:left;">Function}`</td></tr><tr><td style="text-align:center;"><code>inject</code></td><td style="text-align:center;">`{Boolean</td><td style="text-align:center;">String}`</td><td style="text-align:left;"><code>true</code></td></tr><tr><td style="text-align:center;"><code>publicPath</code></td><td style="text-align:center;">`{String</td><td style="text-align:center;">&#39;auto&#39;}`</td><td style="text-align:left;"><code>auto</code></td></tr><tr><td style="text-align:center;"><code>scriptLoading</code></td><td style="text-align:center;">`{&#39;blocking&#39;</td><td style="text-align:center;">&#39;defer&#39;</td><td style="text-align:left;">&#39;module&#39;}`</td></tr><tr><td style="text-align:center;"><code>favicon</code></td><td style="text-align:center;">`{String</td><td style="text-align:center;">}`</td><td style="text-align:left;"></td></tr><tr><td style="text-align:center;"><code>meta</code></td><td style="text-align:center;"><code>{Object}</code></td><td style="text-align:center;"><code>{}</code></td><td style="text-align:left;">meta标签</td></tr><tr><td style="text-align:center;"><code>base</code></td><td style="text-align:center;">`{Object</td><td style="text-align:center;">String</td><td style="text-align:left;">false}`</td></tr><tr><td style="text-align:center;"><code>minify</code></td><td style="text-align:center;">`{Boolean</td><td style="text-align:center;">Object}`</td><td style="text-align:left;"><code>true</code>如果mode为production为false</td></tr><tr><td style="text-align:center;"><code>hash</code></td><td style="text-align:center;"><code>{Boolean}</code></td><td style="text-align:center;"><code>false</code></td><td style="text-align:left;">script和css是否添加hash</td></tr><tr><td style="text-align:center;"><code>cache</code></td><td style="text-align:center;"><code>{Boolean}</code></td><td style="text-align:center;"><code>true</code></td><td style="text-align:left;">开启后文件未修改时使用缓存</td></tr><tr><td style="text-align:center;"><code>showErrors</code></td><td style="text-align:center;"><code>{Boolean}</code></td><td style="text-align:center;"><code>true</code></td><td style="text-align:left;">将错误信息写入到HTML</td></tr><tr><td style="text-align:center;"><code>chunks</code></td><td style="text-align:center;"><code>{?}</code></td><td style="text-align:center;"><code>?</code></td><td style="text-align:left;">可以添加一些chunks</td></tr><tr><td style="text-align:center;"><code>chunksSortMode</code></td><td style="text-align:center;">`{String</td><td style="text-align:center;">Function}`</td><td style="text-align:left;"><code>auto</code></td></tr><tr><td style="text-align:center;"><code>excludeChunks</code></td><td style="text-align:center;"><code>{Array.&lt;string&gt;}</code></td><td style="text-align:center;"></td><td style="text-align:left;">排除的chunks</td></tr><tr><td style="text-align:center;"><code>xhtml</code></td><td style="text-align:center;"><code>{Boolean}</code></td><td style="text-align:center;">false</td><td style="text-align:left;">link标签自关闭</td></tr></tbody></table><h2 id="devserver" tabindex="-1"><a class="header-anchor" href="#devserver" aria-hidden="true">#</a> DevServer</h2><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  <span class="token literal-property property">devServer</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// &#39;auto&#39; | &#39;all&#39;  [string]： auto时允许localhost、host和client.webSocketURL.hostname</span>
    <span class="token comment">// 允许访问的服务器白名单</span>
    <span class="token literal-property property">allowedHosts</span><span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token string">&#39;.host.com&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;host2.com&#39;</span> <span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token comment">// “.”子域通配符</span>
    <span class="token comment">// boolean = false  object</span>
    <span class="token comment">// 用于在启动时通过ZeroConf网络广播你的开发服务器</span>
    <span class="token literal-property property">bonjour</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&#39;http&#39;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">protocol</span><span class="token operator">:</span> <span class="token string">&#39;udp&#39;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">client</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token comment">// &#39;log&#39; | &#39;info&#39; | &#39;warn&#39; | &#39;error&#39; | &#39;none&#39; | &#39;verbose&#39;</span>
      <span class="token comment">// 允许在浏览器中设置日志级别</span>
      <span class="token literal-property property">logging</span><span class="token operator">:</span> <span class="token string">&#39;info&#39;</span><span class="token punctuation">,</span>
      <span class="token comment">// boolean = true  object: { errors boolean = true, warnings boolean = true }</span>
      <span class="token comment">// 当出现编译错误或警告时，在浏览器中显示全屏覆盖</span>
      <span class="token literal-property property">overlay</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token comment">// boolean 浏览器中以百分比显示编译进度</span>
      <span class="token literal-property property">progress</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token comment">// boolean = true  number</span>
      <span class="token comment">// 告诉dev-server它应该尝试重新连接客户端的次数。true为无限次</span>
      <span class="token literal-property property">reconnect</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token comment">// &#39;ws&#39; | &#39;sockjs&#39;  string</span>
      <span class="token comment">// 该配置项允许我们为客户端单独选择当前的devServer传输模式，或者提供自定义的客户端实现</span>
      <span class="token literal-property property">webSocketTransport</span><span class="token operator">:</span> <span class="token string">&#39;ws&#39;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">webSocketTransport</span><span class="token operator">:</span> require<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&#39;./CustomClient&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token comment">// string  object</span>
      <span class="token comment">// 选项允许指定URL到web socket服务器</span>
      <span class="token comment">// webSocketURL: &#39;ws://0.0.0.0:8080/ws&#39;,</span>
      <span class="token literal-property property">webSocketURL</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">hostname</span><span class="token operator">:</span> <span class="token string">&#39;0.0.0.0&#39;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">pathname</span><span class="token operator">:</span> <span class="token string">&#39;/ws&#39;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">password</span><span class="token operator">:</span> <span class="token string">&#39;dev-server&#39;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">port</span><span class="token operator">:</span> <span class="token number">8080</span><span class="token punctuation">,</span>
        <span class="token literal-property property">protocol</span><span class="token operator">:</span> <span class="token string">&#39;ws&#39;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">username</span><span class="token operator">:</span> <span class="token string">&#39;webpack&#39;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// boolean = true</span>
    <span class="token comment">// 启用gzip compression</span>
    <span class="token literal-property property">compress</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token comment">// object</span>
    <span class="token comment">// 为webpack-dev-middleware提供处理webpack资源的配置项</span>
    <span class="token literal-property property">devMiddleware</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">index</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token literal-property property">mimeTypes</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">phtml</span><span class="token operator">:</span> <span class="token string">&#39;text/html&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token literal-property property">publicPath</span><span class="token operator">:</span> <span class="token string">&#39;/publicPathForDevServe&#39;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">serverSideRender</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token literal-property property">writeToDisk</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// boolean</span>
    <span class="token comment">// 使用spdy提供HTTP/2服务。对于node15.0.0及更高版本，此选项将被忽略，以为spdy在这些版本中已被破坏。</span>
    <span class="token comment">// 一旦Express支持，开发服务器将迁移到node内置的HTTP/2。（测试5.x可以，https）</span>
    <span class="token literal-property property">http2</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token comment">// boolean object</span>
    <span class="token comment">// 使用https</span>
    <span class="token literal-property property">https</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">ca</span><span class="token operator">:</span> <span class="token string">&#39;./path/to/server.pem&#39;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">pfx</span><span class="token operator">:</span> <span class="token string">&#39;./path/to/server.pfx&#39;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">key</span><span class="token operator">:</span> <span class="token string">&#39;./path/to/server.key&#39;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">cert</span><span class="token operator">:</span> <span class="token string">&#39;./path/to/server.crt&#39;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">passphrase</span><span class="token operator">:</span> <span class="token string">&#39;webpack-dev-server&#39;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">requestCert</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// 为所有响应添加headers</span>
    <span class="token literal-property property">headers</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token string-property property">&#39;X-Custom-Foo&#39;</span><span class="token operator">:</span> <span class="token string">&#39;bar&#39;</span> <span class="token punctuation">}</span>
    <span class="token literal-property property">headers</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">key</span><span class="token operator">:</span> <span class="token string">&#39;X-Custom&#39;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token string">&#39;foo&#39;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">key</span><span class="token operator">:</span> <span class="token string">&#39;Y-Custom&#39;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token string">&#39;bar&#39;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token comment">// boolean = false  object</span>
    <span class="token comment">// 在使用history时，将index.html代替404响应</span>
    <span class="token literal-property property">historyApiFallback</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">rewrites</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span> <span class="token literal-property property">from</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^\/$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> <span class="token literal-property property">to</span><span class="token operator">:</span> <span class="token string">&#39;/views/landing.html&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span> <span class="token literal-property property">from</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^\/subpage</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> <span class="token literal-property property">to</span><span class="token operator">:</span> <span class="token string">&#39;/views/subpage.html&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span> <span class="token literal-property property">from</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">.</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> <span class="token literal-property property">to</span><span class="token operator">:</span> <span class="token string">&#39;/views/404.html&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token literal-property property">disabledDotRule</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// &#39;local-ip&#39; | &#39;local-ipv4&#39; | &#39;local-ipv6&#39;  string</span>
    <span class="token comment">// 指定要使用的host</span>
    <span class="token literal-property property">host</span><span class="token operator">:</span> <span class="token string">&#39;0.0.0.0&#39;</span>， <span class="token comment">// 这样可以让服务器被外部访问</span>
    <span class="token comment">// &#39;only&#39;  boolean = true</span>
    <span class="token comment">// 启用热模块替换</span>
    <span class="token literal-property property">hot</span><span class="token operator">:</span> <span class="token string">&#39;only&#39;</span><span class="token punctuation">,</span>  <span class="token comment">// 在构建失败时不刷新页面作为回退</span>
    <span class="token comment">// true  string</span>
    <span class="token comment">// The Unix socket to listen to (instead of a host).</span>
    <span class="token literal-property property">ipc</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>  <span class="token comment">// 监听、you-os-temp-dir/webpack-dev-server.sock</span>
    <span class="token literal-property property">ipc</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#39;my-socket.sock&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token comment">// boolean = true</span>
    <span class="token comment">// 默认情况下，当监听到文件变化时dev-server将会重新加载或刷新页面</span>
    <span class="token comment">// 为了liveReload能够生效，devServer.hot配置项必须禁用或者devServer.watchFiles配置项必须启用。</span>
    <span class="token literal-property property">liveReload</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>  <span class="token comment">// 禁用liveReload</span>
    <span class="token comment">// boolean</span>
    <span class="token comment">// 告诉dev-server是否使用magic HTML routes（webpack输出的路由，例如/main for main.js）</span>
    <span class="token literal-property property">magicHtml</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token comment">// function (devServer)</span>
    <span class="token comment">// 提供服务器内部所在其他中间件之后执行自定义中间件的能力</span>
    <span class="token comment">// 该配置项已启用，以支持devServer.setupMiddlewares</span>
    <span class="token function-variable function">onAfterSetupMiddleware</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">devServer</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>devServer<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&#39;webpack-dev-server is not defined&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      devServer<span class="token punctuation">.</span>app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;/some/path&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">custom</span><span class="token operator">:</span> <span class="token string">&#39;response&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// function (devServer)</span>
    <span class="token comment">// 提供服务器内部所在其他中间件之前执行自定义中间件的能力</span>
    <span class="token comment">// 该配置项已启用，以支持devServer.setupMiddlewares</span>
    <span class="token function-variable function">onBeforeSetupMiddleware</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">devServer</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>devServer<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&#39;webpack-dev-server is not defined&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      devServer<span class="token punctuation">.</span>app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;/some/path&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">custom</span><span class="token operator">:</span> <span class="token string">&#39;response&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// function (devServer)</span>
    <span class="token comment">// 提供在webpack-dev-server开始监听端口连接时执行自定义函数的能力</span>
    <span class="token function-variable function">onListening</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">devServer</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>devServer<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&#39;webpack-dev-server is not defined&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">const</span> port <span class="token operator">=</span> devServer<span class="token punctuation">.</span>server<span class="token punctuation">.</span><span class="token function">address</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>port<span class="token punctuation">;</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;Listening on port: &#39;</span><span class="token punctuation">,</span> port<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// boolean  string  object  [string, object]</span>
    <span class="token comment">// 告诉dev-server在服务器已经启动后打开浏览器</span>
    <span class="token literal-property property">open</span><span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token string">&#39;/my-page&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;/another-page&#39;</span> <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token literal-property property">open</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">app</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;google-chrome&#39;</span><span class="token punctuation">,</span>  <span class="token comment">// 不同平台名称不同</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// &#39;auto&#39;  string  number</span>
    <span class="token comment">// 监听的请求端口号</span>
    <span class="token literal-property property">port</span><span class="token operator">:</span> <span class="token string">&#39;auto&#39;</span><span class="token punctuation">,</span> <span class="token comment">// 配置项不能设置未null或&#39;&#39;，如果自动使用一个可用端口要使用&#39;auto&#39;</span>
    <span class="token comment">// object  [object, function]</span>
    <span class="token comment">// 代理，使用http-proxy-middleware</span>
    <span class="token literal-property property">proxy</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string-property property">&#39;/api&#39;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">target</span><span class="token operator">:</span> <span class="token string">&#39;http://localhost:3000&#39;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">pathRewrite</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token string-property property">&#39;^/api&#39;</span><span class="token operator">:</span> <span class="token string">&#39;&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token literal-property property">secure</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>  <span class="token comment">// 默认不接受HTTPS上运行证书无效的服务器，需设置该项为false</span>
        <span class="token literal-property property">changeOrigin</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>  <span class="token comment">// 默认情况下，代理时会保留主机头的来源，可以设置该项以覆盖此行为</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// 默认情况proxy不会代理对root的请求。要启用根代理，应将devMiddleware.index设置为false</span>
    <span class="token literal-property property">devMiddleware</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">index</span><span class="token operator">:</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 配置多个代理</span>
    <span class="token literal-property property">proxy</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">context</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;/auth&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;/api&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token literal-property property">target</span><span class="token operator">:</span> <span class="token string">&#39;http://localhost:3000&#39;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token comment">// &#39;http&#39; | &#39;https&#39; | &#39;spdy&#39;  string object</span>
    <span class="token comment">// 设置服务器和配置项，默认http</span>
    <span class="token literal-property property">server</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&#39;https&#39;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">minVersion</span><span class="token operator">:</span> <span class="token string">&#39;TLSv1.1&#39;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">key</span><span class="token operator">:</span> fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#39;./server.key&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token literal-property property">pfx</span><span class="token operator">:</span> fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#39;./server.pfx&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token literal-property property">cert</span><span class="token operator">:</span> fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#39;./server.crt&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token literal-property property">ca</span><span class="token operator">:</span> fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#39;./ca.pem&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token literal-property property">passphrase</span><span class="token operator">:</span> <span class="token string">&#39;webpack-dev-server&#39;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">requestCert</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// boolean = true</span>
    <span class="token comment">// 允许在SIGINT和SIGTERM信号时关闭开发服务器和退出进程</span>
    <span class="token literal-property property">setupExitSignals</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token comment">// function (middlewares, devServer)</span>
    <span class="token comment">// 提供执行自定义函数和应用自定义中间件的能力</span>
    <span class="token function-variable function">setupMiddlewares</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">middlewares<span class="token punctuation">,</span> devServer</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>devServer<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&#39;webpack-dev-server is not defined&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      devServer<span class="token punctuation">.</span>app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;/setup-middleware/some/path&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">_<span class="token punctuation">,</span> response</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        response<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&#39;setup-middlewares option GET&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token comment">// 在其他中间件之前运行一个中间件（代替onBeforeSetupMiddleware）</span>
      middlewares<span class="token punctuation">.</span><span class="token function">unshift</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;first-in-array&#39;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">&#39;/foo/path&#39;</span><span class="token punctuation">,</span>  <span class="token comment">// 可选</span>
        <span class="token function-variable function">middleware</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&#39;Foo!&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token comment">// 在其他中间件之后运行一个中间件（代替onAfterSetupMiddleware）</span>
      middlewares<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;hello-world-test-one&#39;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">&#39;/foo/bar&#39;</span><span class="token punctuation">,</span>  <span class="token comment">// 可选</span>
        <span class="token function-variable function">middleware</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&#39;Foo Bar!&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>

      middlewares<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&#39;Hello World!&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>

      <span class="token keyword">return</span> middleWares<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// boolean  string  object  [string, object]</span>
    <span class="token comment">// 该配置项允许配置从目录提供静态文件的选项（默认public， false禁用）</span>
    <span class="token keyword">static</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;assets&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;css&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token keyword">static</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token comment">// string = path.join(process.cwd(), &#39;public&#39;)</span>
      <span class="token comment">// 告诉服务器从哪里提供内容</span>
      <span class="token literal-property property">directory</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#39;public&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token comment">// object</span>
      <span class="token comment">// 可配置从static.directory提供静态文件的高级选项</span>
      <span class="token literal-property property">staticOptions</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">redirect</span><span class="token operator">:</span> <span class="token boolean">true</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token comment">// string = &#39;/&#39;  [string]</span>
      <span class="token comment">// 告诉服务器在哪个URL上提供static.directory的内容</span>
      <span class="token literal-property property">publicPath</span><span class="token operator">:</span> <span class="token string">&#39;/serve-public-path-url&#39;</span><span class="token punctuation">,</span>
      <span class="token comment">// boolean object = { icons: true }</span>
      <span class="token comment">// 告诉开发服务器启用后使用serverIndex中间件</span>
      <span class="token literal-property property">serveIndex</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token comment">// boolean  object</span>
      <span class="token comment">// 通过static.directory配置告诉dev-server监听文件（默认启用）</span>
      <span class="token literal-property property">watch</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">ignored</span><span class="token operator">:</span> <span class="token string">&#39;*.txt&#39;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">usePolling</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// string  object  [string, object] </span>
    <span class="token comment">// 该配置项允许你配置globs/directories/files来监听文件变化</span>
    <span class="token literal-property property">watchFiles</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;src/**/*.php&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;public/**/**&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token literal-property property">watchFiles</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">paths</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;src/**/*.php&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;public/**/*&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">usePolling</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// false | &#39;sockjs&#39; | &#39;ws&#39;  string  function  object</span>
    <span class="token comment">// 该项允许我们选择当前的web-socket服务器或者提供自定义的web-socket服务器实现</span>
    <span class="token literal-property property">webSocketServer</span><span class="token operator">:</span> <span class="token string">&#39;ws&#39;</span>
    <span class="token literal-property property">webSocketServer</span><span class="token operator">:</span> require<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&#39;./CustomServer&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="asset-module资源模块" tabindex="-1"><a class="header-anchor" href="#asset-module资源模块" aria-hidden="true">#</a> asset module资源模块</h2><p>asset module资源模块，在webpack5之前，通常使用：</p><ul><li>raw-loader 将文件导入为字符串</li><li>url-loader 将文件作为data URI内联到bundle中</li><li>file-loader 将问价发送到输出目录</li></ul><p>资源模块通过4中新的模块类型，来替换之前都loader：</p><ul><li>asset/resource 发送一个单独的文件并导出URL（之前使用file-loader）</li><li>asset/inline 导出一个资源的data URI（之前使用url-loader）</li><li>asset/source 导出资源的源代码（之前使用raw-loader）</li><li>asset 在导出一个data URI和发送一个单独的文件之间自动选择（之前使用url-loader，并配置资源体积限制）</li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;path&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token string">&#39;./src/index.js&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">&#39;main.js&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">path</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#39;dist&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token comment">// 配置asset文件路径及名称，优先级低于generator.filename</span>
    <span class="token literal-property property">assetModuleFilename</span><span class="token operator">:</span> <span class="token string">&#39;asset/[hash][ext][query]&#39;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.jpg</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&#39;asset/resource&#39;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">generator</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token comment">// 配置文件路径及名称，优先级高于output.assetModuleFilename</span>
          <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">&#39;images/[hash][ext][query]&#39;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.svg$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&#39;asset/inline&#39;</span>
        <span class="token comment">// 可通过generator.dataUrl自定义编码算法</span>
        <span class="token literal-property property">generator</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token function-variable function">dataUrl</span><span class="token operator">:</span> <span class="token parameter">content</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            content <span class="token operator">=</span> content<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token function">svgToMiniDataURI</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.txt$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&#39;asset/source&#39;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.png$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&#39;asset&#39;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">parer</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">dataUrlCondition</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">maxSize</span><span class="token operator">:</span> <span class="token number">4</span> <span class="token operator">*</span> <span class="token number">1024</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>变更内联loader的语法 在asset模块和webpack5之前，可以使用内联语法与上述loader结合使用。 现在建议取点所有的内联loader的语法，使用资源查询条件来模仿内联语法的功能。</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token operator">-</span> <span class="token keyword">import</span> myModule <span class="token keyword">from</span> <span class="token string">&#39;raw-loader!my-module&#39;</span><span class="token punctuation">;</span>
<span class="token operator">+</span> <span class="token keyword">import</span> myModule <span class="token keyword">from</span> <span class="token string">&#39;my-module?raw&#39;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>webpack相关配置：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">resourceQuery</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">raw</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
      <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&#39;asset/source&#39;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>如果你想把原始资源排除在其他loader的处理范围以外，请使用取反的原则：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.m?js$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
    <span class="token literal-property property">resourceQuery</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">not</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">raw</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token operator">...</span> <span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">resourecQuery</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">raw</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
    <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&#39;asset/source&#39;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>或者使用oneOf的规则列表。此处只应用第一个匹配规则：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">oneOf</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          <span class="token literal-property property">resoureceQuery</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">raw</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
          <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&#39;asset/sourec&#39;</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.m?js$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
          <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token operator">...</span> <span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><!--[--><!--]--></div><footer class="page-meta"><div class="meta-item edit-link"><a class="external-link meta-item-label" href="https://github.com/renchao8697/note/edit/main/docs/frame/webpack/index.md" rel="noopener noreferrer" target="_blank" aria-label="Edit this page"><!--[--><!--]--> Edit this page <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><div class="meta-item last-updated"><span class="meta-item-label">Last Updated: </span><!----></div><div class="meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: renchao8697@sina.com">renchao8697</span><!----><!--]--><!--]--></span></div></footer><nav class="page-nav"><p class="inner"><span class="prev"><a href="/note/frame/react/" class="" aria-label="React"><!--[--><!--]--> React <!--[--><!--]--></a></span><!----></p></nav><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/note/assets/app.30d0ff3e.js" defer></script>
  </body>
</html>
